"use strict";window.couponVm=new Vue({el:"#couponBox",data:{couponList:[],couponCurrencyData:couponCurrencyData},methods:{choice:function(e){$(".coupon-bg").addClass("move"),$(".small-coupon").addClass("small-show"),1==e&&toast("<p><i class='iconfont iconS-YG3'></i></p>"+this.couponCurrencyData.sgksCouponSuccess,1e3)},getList:function(){var o=[],e=JSON.parse(store.get("sinfo")) || {},t=couponCurrencyData.cartProm,a=e.promotion||[],n=Util.dateFormat();if($.each(a,function(e,t){2==t.rule&&o.push(t)}),o.length<=0&&$.each(t,function(e,t){20==t.rule&&0<t.value&&t.start<=n&&t.end>=n&&o.push(t)}),0==o.length)return!1;this.couponList=o,setTimeout(function(){$(".coupon-bg").show()},3e3);var u,r=""+new Date;!function(e,t){var o=localStorage.getItem(e);if(!o)return!1;var a=JSON.parse(o);{if(!((new Date).getTime()-a.time>t))return a.data;console.log("信息已过期")}}("checkoutTime",36e4)&&store.set("checkoutTime",r,36e4,36e4),u=store.get("checkoutTime"),setInterval(function(){!function(){if("string"==typeof(u=u||new Date((new Date).setHours(24,0,0,0)))){var e=u.replace(/-/g,"/");e.length<=10&&(e+=" 23:59:59"),u=new Date(e)}var t=new Date,o=u.getTime()+36e5-t.getTime();o<100&&(o=0);var a=o;o=Math.floor(o/1e3);var n=Math.floor(o/3600/24),r=Math.floor(o%86400/3600),i=Math.floor(o%3600/60),c=o%3600%60,s=a%3600%60%100;n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),c<10&&(c="0"+c),s<10&&(s="0"+s),$(".adv-timer").html('<i class="timer-i">'+i+'</i>:<i class="timer-i">'+c+'</i>:<i class="timer-i">'+s+"</i>"),Math.floor(t.getTime()/100),Math.floor(u.getTime()/100)}()},100)},getPrice:function(e){return publiceFormatCurrency(e)}},created:function(){1!=this.couponCurrencyData.detailPopArrClose&&this.couponCurrencyData.detailPop||this.getList()}});